# 06. 미니 MVC 프레임워크 만들기

디자인 패턴과 라이브러리를 적용하여 MVC 프레임워크를 직접 만들어보자. 프레임워크를 만드는 과정 속에서 디자인 패턴의 응용과 오픈 소스 라이브러리의 사용, 자바 리플렉션 API와 애노테이션을 사용하는 방법을 익히게 될 것이다.

<br>

# 6.1 프런트 컨트롤러의 도입

**'프런트 컨트롤러**' 를 통해 요청 데이터를 처리하는 코드나 모델과 뷰를 제어하는 **코드가 중복되는 경우를 해결해보자.**

<br>

## 6.1.1. 프런트 컨트롤러 패턴

* **프런트 컨트롤러를 적용한 MVC 구조도와 클라이언트 요청 처리 절차**

  <img src="../capture/스크린샷 2019-09-25 오후 9.34.50.png">

  1. 웹 브라우저의 요청을 프런트 컨트롤러에서 받는다. 프런트 컨트롤러는 **VO 객체를 생성하여** 데이터를 담는다. 그리고 **ServletRequest 보관함에 VO 객체를 저장한다.** 요청 URL에 따라 **페이지 컨트롤러를 선택하여 실행 위임.**
  2. 페이지 컨트롤러는 **DAO를 사용하여 프런트 컨트롤러부터 받은 VO 객체를 처리**
  3. **DAO는** 페이지 컨트롤러로부터 받은 **데이터 처리**
  4. 페이지 컨트롤러는 화면을 만들 때 사용할 **데이터 준비.** 그리고 JSP가 사용할 수 있도록 **ServletRequest 보관소에 저장.** 프턴트 컨트롤러에게 **화면 출력을 담당할 뷰 정보(JSP의 URL)를 반환**
  5. 프런트 컨트롤러는 페이지 컨트롤러가 알려준 **JSP로 실행을 위임. 오류 발생시에는 '/Error.jsp'로 실행 위임.**
  6. **JSP는** 페이지 컨트롤러에서 준비한 데이터를 가지고 **화면을 생성하여 출력.** 프런트 컨트롤러는 웹 브라우저의 요청에 대한 응답을 완료.

  <br>

기존에 서블릿이 단독으로 하던 작업을 **프런트 컨트롤러와 페이지 컨트롤러로** 이렇게 두 개의 역할로 나누어 수행한다.

* **프런트 컨트롤러**
  * VO 객체의 준비
  * 뷰 컴포넌트로의 위임
  * 오류 처리
* **페이지 컨트롤러**
  * 요청 페이지만을 위한 작업 수행

<br>

### *디자인 패턴*

개발자는 늘 **인스턴스의 생성과 소멸에** 대해 관심을 가지고 **시스템 성능을 높일 수 있는 방향으로** 구현해야 한다. 또한 **중복 작업을 최소화하여 유지보수를 좋게** 만드는 방법을 찾아야 한다.

**디자인 패턴은** 이미 실무에서 사용되고 검증된 방법이기 때문에 시스템 개발에 디자인 패턴을 활용하면 시행착오를 최소화할 수 있다.

<br>

### *프레임워크*

**프레임워크(Framework)는** 디자인 패턴을 적용해 만든 시스템 중에서 우수 사례(Best Practice)를 모아 하나의 개발 툴로 표쥰화시킨 것이다.

* **스프링 프레임워크** : 범용 시스템 개발에 사용
* **MyBatis** : 데이터베이스 연동을 쉽게 해주는 프레임워크

<br>

## 6.1.2. 프런트 컨트롤러를 통해 회원 목록 출력

**프런트 컨트롤러가 적용된 MVC 구동 시나리오**

<img src="../capture/스크린샷 2019-09-25 오후 9.56.26.png">

1. 웹 브라우저는 '/member/list.do'를 **요청한다.**
2. 프런트 컨트롤러 'DispatcherServlet'은 클라이언트가 요청한 **서블릿으로 실행 위임**
3. 페이지 컨트롤러 'MemberListServlet'은 **MemberDao에게 회원 목록 요청**
4. MemberDao는 데이터베이스로부터 회원 정보를 가져와서 **Member 객체에 담는다. 그리고 Member 목록 반환**
5. 페이지 컨트롤러는 **Member 목록을** JSP에서 사용할 수 있도록 **ServletRequest 보관소에 저장**
6. 페이지 컨트롤러는 **URL 정보를 보관소에 저장**
7. 프런트 컨트롤러는 **보관소에서 URL 정보를 꺼내 해당 JSP로 실행 위임**
8. MemberList.jsp는 **ServletRequest 보관소에 저장된 Member 목록을 꺼낸다.**
9. MemberList.jsp는 Member 객체들의 데이터를 이용하여 **회원 목록 화면을 출력한다.**
10. 응답 완료

  <br>

## 6.1.3. 프런트 컨트롤러 만들기

